!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.AnimIt=n():t.AnimIt=n()}(this,function(){return function(t){function n(e){if(r[e])return r[e].exports;var a=r[e]={exports:{},id:e,loaded:!1};return t[e].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var r={};return n.m=t,n.c=r,n.p="",n(0)}([function(t,n,r){t.exports=r(1)},function(t,n,r){"use strict";function e(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}var a=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t},u=r(2),o=e(u),i=r(3),m=e(i),s=r(4),c=e(s),f=r(5),l=e(f);t.exports=function(t){var n=void 0,r=t.curve;return r instanceof String&&(r=o[r]),n=t.tween?c.anim(t):t.target?c.anim(a({tween:m.tweenReference({target:t.target,setter:t.setter})},t)):c.anim(a({tween:Array.isArray(t.to)?m.tweenArray({from:t.from,to:t.to,curve:r}):m.tweenNumber({from:t.from,to:t.to,curve:r})},t))},t.exports=Object.assign(t.exports,a({animation:c.anim},m,o,{Extra:l}))},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=(n.linear=function(t){return t},n.inQuad=function(t){return t*t},n.outQuad=function(t){return-(t-=1)*t+1},n.inOutQuad=function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},n.inCubic=function(t){return t*t*t},n.outCubic=function(t){return--t*t*t+1},n.inOutCubic=function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},n.inQuart=function(t){return t*t*t*t},n.outQuart=function(t){return-(--t*t*t*t-1)},n.inOutQuart=function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},n.inQuint=function(t){return t*t*t*t*t},n.outQuint=function(t){return--t*t*t*t*t+1},n.inOutQuint=function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},n.inSine=function(t){return-1*Math.cos(t*(Math.PI/2))+1},n.outSine=function(t){return Math.sin(t*(Math.PI/2))},n.inOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},n.inExpo=function(t){return 0===t?0:Math.pow(2,10*(t-1))},n.outExpo=function(t){return 1===t?1:-Math.pow(2,-10*t)+1},n.inOutExpo=function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},n.inCirc=function(t){return-(Math.sqrt(1-t*t)-1)},n.outCirc=function(t){return Math.sqrt(1- --t*t)},n.inOutCirc=function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},n.inElastic=function(t){var n=1.70158,r=0,e=1;return 0===t?0:1===t?1:(r||(r=.3),n=r/(2*Math.PI)*Math.asin(1/e),-(e*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/r)))},n.outElastic=function(t){var n=1.70158,r=0,e=1;return 0===t?0:1===t?1:(r||(r=.3),n=r/(2*Math.PI)*Math.asin(1/e),e*Math.pow(2,-10*t)*Math.sin((t-n)*(2*Math.PI)/r)+1)},n.inOutElastic=function(t){var n=1.70158,r=0,e=1;return 0===t?0:2===(t/=.5)?1:(r||(r=.3*1.5),n=r/(2*Math.PI)*Math.asin(1/e),t<1?-.5*(e*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/r)):e*Math.pow(2,-10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/r)*.5+1)},n.inBack=function(t,n){return void 0===n&&(n=1.70158),t*t*((n+1)*t-n)},n.outBack=function(t,n){return void 0===n&&(n=1.70158),--t*t*((n+1)*t+n)+1},n.inOutBack=function(t,n){return void 0===n&&(n=1.70158),(t/=.5)<1?.5*(t*t*(((n*=1.525)+1)*t-n)):.5*((t-=2)*t*(((n*=1.525)+1)*t+n)+2)},n.inBounce=function(t){return 1-e(1-t)}),e=n.outBounce=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};n.inOutBounce=function(t){return t<.5?.5*r(2*t):.5*e(2*t-1)+.5}},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){return t};n.tweenNumber=function(t){var n=t.from,e=t.to,a=t.curve||r;return function(t){return a(t)*(e-n)+n}},n.tweenArray=function(t){var n=t.from,e=t.to,a=t.curve||r;return function(t){for(var r=[],u=0,o=n.length;u<o;u++)r[u]=a(t)*(e[u]-n[u])+n[u];return r}},n.tweenReference=function(t){var n=t.target,r=t.setter,e=function t(n,r){var e=[],a=function(a){n[a]instanceof Function?e.push(function(t){r[a]=n[a](t)}):e=e.concat(t(n[a],r[a]))};for(var u in n)a(u);return e},a=e(r,n);return function(t){return a.forEach(function(n){n(t)}),n}}},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.tick=function(t,n,r,e,a){function u(e){n(e);var i=(new Date).getTime();o?a&&a(o):i<e+t?requestAnimationFrame(u.bind(null,e)):r&&r()}var o=!1,i=function(){var t=(new Date).getTime();e&&e(),requestAnimationFrame(u.bind(null,t))};return i.stop=function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0];o=t},i},e=n.anim=function(t){var n=t.duration,e=t.delay,a=t.tween,u=t.onStart,o=t.onUpdate,i=t.onComplete,m=t.onStop,s=void 0,c=function(t,c){s=r(n,function(t){var r=(new Date).getTime(),e=n?(r-t)/n:1;e=e>1?1:e;var u=a(e);o&&o(u,e)},i||t,u,m||c),e?setTimeout(s,e):s()},f=function(){return new Promise(c)};return f.stop=function(t){s.stop(t)},f};n.default=e},function(t,n,r){"use strict";function e(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.TweenCSSTransform=n.TweenConcatStr=void 0;var u=r(6),o=a(u),i=r(7),m=e(i);n.TweenConcatStr=o.default,n.TweenCSSTransform=m},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.tweenConcatStr=function(t){var n=t.str,r=t.curve||function(t){return t};return function(t){return t=r(t),t=t>1?1:t,t=t<0?0:t,n.slice(0,Math.round(n.length*t))}};n.default=r},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.tweenCSSTransform=n.interpret=n.inputCSSMatrix=void 0;var e=r(3),a=r(8);n.inputCSSMatrix=a.inputCSSMatrix,n.interpret=a.interpret;var u=n.tweenCSSTransform=function(t){var n=Object.assign({translate:[0,0,0],rotate:[0,0,0],skew:[0,0,0],scale:[1,1,1]},t.from),r=Object.assign({},t.to),u=t.curve||function(t){return t},o={};for(var i in r)o[i]=(0,e.tweenArray)({from:n[i],to:r[i],curve:u});return function(t){var r={};for(var e in o)r[e]=o[e](t);return(0,a.outputCSSMatrix)((0,a.build)(Object.assign({},n,r)))}};n.default=u},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.inputCSSMatrix=n.outputCSSMatrix=n.identity=n.precision=n.behind=n.inFront=n.normalizeRotation=n.notEquals=n.equals=n.build=n.average=n.interpret=n.transpose=n.inverse=n.getTranslate=n.perspective=n.skewY=n.skewX=n.skew=n.aboutOrigin=n.rotateAxis=n.rotate=n.rotateZ=n.rotateY=n.rotateX=n.scale=n.thenScale=n.translate=n.moveThen=n.thenMove=n.multiply=n.multiply4x4=void 0;var a=r(9),u=e(a),o=(n.multiply4x4=function(t,n){return[t[0]*n[0]+t[4]*n[1]+t[8]*n[2]+t[12]*n[3],t[1]*n[0]+t[5]*n[1]+t[9]*n[2]+t[13]*n[3],t[2]*n[0]+t[6]*n[1]+t[10]*n[2]+t[14]*n[3],t[3]*n[0]+t[7]*n[1]+t[11]*n[2]+t[15]*n[3],t[0]*n[4]+t[4]*n[5]+t[8]*n[6]+t[12]*n[7],t[1]*n[4]+t[5]*n[5]+t[9]*n[6]+t[13]*n[7],t[2]*n[4]+t[6]*n[5]+t[10]*n[6]+t[14]*n[7],t[3]*n[4]+t[7]*n[5]+t[11]*n[6]+t[15]*n[7],t[0]*n[8]+t[4]*n[9]+t[8]*n[10]+t[12]*n[11],t[1]*n[8]+t[5]*n[9]+t[9]*n[10]+t[13]*n[11],t[2]*n[8]+t[6]*n[9]+t[10]*n[10]+t[14]*n[11],t[3]*n[8]+t[7]*n[9]+t[11]*n[10]+t[15]*n[11],t[0]*n[12]+t[4]*n[13]+t[8]*n[14]+t[12]*n[15],t[1]*n[12]+t[5]*n[13]+t[9]*n[14]+t[13]*n[15],t[2]*n[12]+t[6]*n[13]+t[10]*n[14]+t[14]*n[15],t[3]*n[12]+t[7]*n[13]+t[11]*n[14]+t[15]*n[15]]},n.multiply=function(t,n){return[t[0]*n[0]+t[4]*n[1]+t[8]*n[2],t[1]*n[0]+t[5]*n[1]+t[9]*n[2],t[2]*n[0]+t[6]*n[1]+t[10]*n[2],0,t[0]*n[4]+t[4]*n[5]+t[8]*n[6],t[1]*n[4]+t[5]*n[5]+t[9]*n[6],t[2]*n[4]+t[6]*n[5]+t[10]*n[6],0,t[0]*n[8]+t[4]*n[9]+t[8]*n[10],t[1]*n[8]+t[5]*n[9]+t[9]*n[10],t[2]*n[8]+t[6]*n[9]+t[10]*n[10],0,t[0]*n[12]+t[4]*n[13]+t[8]*n[14]+t[12],t[1]*n[12]+t[5]*n[13]+t[9]*n[14]+t[13],t[2]*n[12]+t[6]*n[13]+t[10]*n[14]+t[14],1]}),i=n.thenMove=function(t,n){return n[2]||(n[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+n[0],t[13]+n[1],t[14]+n[2],1]},m=(n.moveThen=function(t,n){t[2]||(t[2]=0);var r=t[0]*n[0]+t[1]*n[4]+t[2]*n[8],e=t[0]*n[1]+t[1]*n[5]+t[2]*n[9],a=t[0]*n[2]+t[1]*n[6]+t[2]*n[10];return i(n,[r,e,a])},n.translate=function(t,n,r){return void 0===r&&(r=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,n,r,1]},n.thenScale=function(t,n){return[n[0]*t[0],n[1]*t[1],n[2]*t[2],0,n[0]*t[4],n[1]*t[5],n[2]*t[6],0,n[0]*t[8],n[1]*t[9],n[2]*t[10],0,n[0]*t[12],n[1]*t[13],n[2]*t[14],1]},n.scale=function(t,n,r){return void 0===r&&(r=1),void 0===n&&(n=t),[t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1]}),s=(n.rotateX=function(t){var n=Math.cos(t),r=Math.sin(t);return[1,0,0,0,0,n,r,0,0,-r,n,0,0,0,0,1]},n.rotateY=function(t){var n=Math.cos(t),r=Math.sin(t);return[n,0,-r,0,0,1,0,0,r,0,n,0,0,0,0,1]},n.rotateZ=function(t){var n=Math.cos(t),r=Math.sin(t);return[n,r,0,0,-r,n,0,0,0,0,1,0,0,0,0,1]},n.rotate=function(t,n,r){var e=Math.cos(t),a=Math.sin(t),u=Math.cos(n),o=Math.sin(n),i=Math.cos(r),m=Math.sin(r);return[u*i,e*m+a*o*i,a*m-e*o*i,0,-u*m,e*i-a*o*m,a*i+e*o*m,0,o,-a*u,e*u,0,0,0,0,1]}),c=(n.rotateAxis=function(t,n){var r=Math.sin(n),e=Math.cos(n),a=1-e,u=t[0]*t[0]*a,o=t[0]*t[1]*a,i=t[0]*t[2]*a,m=t[1]*t[1]*a,s=t[1]*t[2]*a,c=t[2]*t[2]*a,f=t[0]*r,l=t[1]*r,p=t[2]*r;return[u+e,o+p,i-l,0,o-p,m+e,s+f,0,i+l,s-f,c+e,0,0,0,0,1]},n.aboutOrigin=function(t,n){var r=t[0]-(t[0]*n[0]+t[1]*n[4]+t[2]*n[8]),e=t[1]-(t[0]*n[1]+t[1]*n[5]+t[2]*n[9]),a=t[2]-(t[0]*n[2]+t[1]*n[6]+t[2]*n[10]);return i(n,[r,e,a])},n.skew=function(t,n,r){return[1,Math.tan(n),0,0,Math.tan(r),1,0,0,0,Math.tan(t),1,0,0,0,0,1]}),f=(n.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},n.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},n.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},n.getTranslate=function(t){return[t[12],t[13],t[14]]}),l=(n.inverse=function(t){var n=t[5]*t[10]-t[6]*t[9],r=t[4]*t[10]-t[6]*t[8],e=t[4]*t[9]-t[5]*t[8],a=t[1]*t[10]-t[2]*t[9],u=t[0]*t[10]-t[2]*t[8],o=t[0]*t[9]-t[1]*t[8],i=t[1]*t[6]-t[2]*t[5],m=t[0]*t[6]-t[2]*t[4],s=t[0]*t[5]-t[1]*t[4],c=t[0]*n-t[1]*r+t[2]*e,f=1/c,l=[f*n,-f*a,f*i,0,-f*r,f*u,-f*m,0,f*e,-f*o,f*s,0,0,0,0,1];return l[12]=-t[12]*l[0]-t[13]*l[4]-t[14]*l[8],l[13]=-t[12]*l[1]-t[13]*l[5]-t[14]*l[9],l[14]=-t[12]*l[2]-t[13]*l[6]-t[14]*l[10],l},n.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},n.interpret=function(t){var n=[M[0],M[1],M[2]],r=_sign(n[0]),e=_norm(n),a=[n[0]+r*e,n[1],n[2]],u=2/_normSquared(a);if(u>=1/0)return{translate:f(M),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];i[0]=1-u*a[0]*a[0],i[5]=1-u*a[1]*a[1],i[10]=1-u*a[2]*a[2],i[1]=-u*a[0]*a[1],i[2]=-u*a[0]*a[2],i[6]=-u*a[1]*a[2],i[4]=i[1],i[8]=i[2],i[9]=i[6];var s=o(i,M),c=[s[5],s[6]],l=_sign(c[0]),p=_norm(c),h=[c[0]+l*p,c[1]],v=2/_normSquared(h),y=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];y[5]=1-v*h[0]*h[0],y[10]=1-v*h[1]*h[1],y[6]=-v*h[0]*h[1],y[9]=y[6];var d=o(y,i),x=o(d,M),w=m(x[0]<0?-1:1,x[5]<0?-1:1,x[10]<0?-1:1);x=o(x,w),d=o(w,d);var g={};return g.translate=f(M),g.rotate=[Math.atan2(-d[6],d[10]),Math.asin(d[2]),Math.atan2(-d[1],d[0])],g.rotate[0]||(g.rotate[0]=0,g.rotate[2]=Math.atan2(d[4],d[5])),g.scale=[x[0],x[5],x[10]],g.skew=[Math.atan2(x[9],g.scale[2]),Math.atan2(x[8],g.scale[2]),Math.atan2(x[4],g.scale[0])],Math.abs(g.rotate[0])+Math.abs(g.rotate[2])>1.5*Math.PI&&(g.rotate[1]=Math.PI-g.rotate[1],g.rotate[1]>Math.PI&&(g.rotate[1]-=2*Math.PI),g.rotate[1]<-Math.PI&&(g.rotate[1]+=2*Math.PI),g.rotate[0]<0?g.rotate[0]+=Math.PI:g.rotate[0]-=Math.PI,g.rotate[2]<0?g.rotate[2]+=Math.PI:g.rotate[2]-=Math.PI),g}),p=(n.average=function(t,n,r){r=void 0===r?.5:r;for(var e=l(M1),a=l(M2),u={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},o=0;o<3;o++)u.translate[o]=(1-r)*e.translate[o]+r*a.translate[o],u.rotate[o]=(1-r)*e.rotate[o]+r*a.rotate[o],u.scale[o]=(1-r)*e.scale[o]+r*a.scale[o],u.skew[o]=(1-r)*e.skew[o]+r*a.skew[o];return p(u)},n.build=function(t){var n=m(t.scale[0],t.scale[1],t.scale[2]),r=c(t.skew[0],t.skew[1],t.skew[2]),e=s(t.rotate[0],t.rotate[1],t.rotate[2]);return i(o(o(e,r),n),t.translate)}),h=(n.equals=function(t,n){return!h(t,n)},n.notEquals=function(t,n){return t!==n&&(!(t&&n)||t[12]!==n[12]||t[13]!==n[13]||t[14]!==n[14]||t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[4]!==n[4]||t[5]!==n[5]||t[6]!==n[6]||t[8]!==n[8]||t[9]!==n[9]||t[10]!==n[10])});n.normalizeRotation=function(t){var n=t.slice(0);for(n[0]!==.5*Math.PI&&n[0]!==.5*-Math.PI||(n[0]=-n[0],n[1]=Math.PI-n[1],n[2]-=Math.PI),n[0]>.5*Math.PI&&(n[0]=n[0]-Math.PI,n[1]=Math.PI-n[1],n[2]-=Math.PI),n[0]<.5*-Math.PI&&(n[0]=n[0]+Math.PI,n[1]=-Math.PI-n[1],n[2]-=Math.PI);n[1]<-Math.PI;)n[1]+=2*Math.PI;for(;n[1]>=Math.PI;)n[1]-=2*Math.PI;for(;n[2]<-Math.PI;)n[2]+=2*Math.PI;for(;n[2]>=Math.PI;)n[2]-=2*Math.PI;return n},n.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],n.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],n.precision=1e-6,n.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n.outputCSSMatrix=function(t){return"matrix3d("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+","+t[6]+","+t[7]+","+t[8]+","+t[9]+","+t[10]+","+t[11]+","+t[12]+","+t[13]+","+t[14]+","+t[15]+")"},n.inputCSSMatrix=function(t){new u.default(t);return[m11,m12,m13,m14,m21,m22,m23,m24,m31,m32,m33,m34,m41,m42,m43,m44]}},function(t,n,r){var e=r(10);t.exports=e},function(t,n,r){function e(t){this.m11=this.m22=this.m33=this.m44=1,this.m12=this.m13=this.m14=this.m21=this.m23=this.m24=this.m31=this.m32=this.m34=this.m41=this.m42=this.m43=0,"string"==typeof t&&this.setMatrixValue(t)}function a(t){return String.fromCharCode(t+97)}function u(t){return"m"+(Math.floor(t/4)+1)+(t%4+1)}function o(t){return t.value}function i(t){return h[t]}function m(t){return"rad"===t.units?(t.value=f.angles.rad2deg(t.value),t.units="deg"):"grad"===t.units&&(t.value=f.angles.grad2deg(t.value),t.units="deg"),t}function s(t,n){n.value=n.value.map(m);var r=i(n.key),e=r(t,n);return e||t}function c(t){var n=f.transp.stringToStatements(t);if(1===n.length&&/^matrix/.test(t))return t;var r=f.funcs.onlyFirstArg(f.transp.statementToObject),a=n.map(r),u=new e,o=a.reduce(s,u),i=o.toString();return i}var f={angles:r(11),matrix:r(12),transp:r(15),funcs:{onlyFirstArg:function(t,n){return n=n||this,function(r){return t.call(n,r)}}}};e.displayName="XCSSMatrix";var l=["a","b","c","d","e","f"],p=["m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44"];[["m11","a"],["m12","b"],["m21","c"],["m22","d"],["m41","e"],["m42","f"]].forEach(function(t){var n=t[0],r=t[1];Object.defineProperty(e.prototype,r,{set:function(t){this[n]=t},get:function(){return this[n]},enumerable:!0,configurable:!0})}),e.prototype.multiply=function(t){return f.matrix.multiply(this,t)},e.prototype.inverse=function(){return f.matrix.inverse(this)},e.prototype.rotate=function(t,n,r){("number"!=typeof t||isNaN(t))&&(t=0),"number"==typeof n&&!isNaN(n)||"number"==typeof r&&!isNaN(r)||(r=t,t=0,n=0),("number"!=typeof n||isNaN(n))&&(n=0),("number"!=typeof r||isNaN(r))&&(r=0),t=f.angles.deg2rad(t),n=f.angles.deg2rad(n),r=f.angles.deg2rad(r);var a,u,o,i=new e,m=new e,s=new e;r/=2,a=Math.sin(r),u=Math.cos(r),o=a*a,s.m11=s.m22=1-2*o,s.m12=s.m21=2*a*u,s.m21*=-1,n/=2,a=Math.sin(n),u=Math.cos(n),o=a*a,m.m11=m.m33=1-2*o,m.m13=m.m31=2*a*u,m.m13*=-1,t/=2,a=Math.sin(t),u=Math.cos(t),o=a*a,i.m22=i.m33=1-2*o,i.m23=i.m32=2*a*u,i.m32*=-1;var c=new e,l=this.toString()===c.toString(),p=l?s.multiply(m).multiply(i):this.multiply(i).multiply(m).multiply(s);return p},e.prototype.rotateAxisAngle=function(t,n,r,a){("number"!=typeof t||isNaN(t))&&(t=0),("number"!=typeof n||isNaN(n))&&(n=0),("number"!=typeof r||isNaN(r))&&(r=0),("number"!=typeof a||isNaN(a))&&(a=0),0===t&&0===n&&0===r&&(r=1),a=(f.angles.deg2rad(a)||0)/2;var u,o,i,m=new e,s=Math.sqrt(t*t+n*n+r*r),c=Math.cos(a),l=Math.sin(a),p=l*l,h=l*c,v=function(t){return parseFloat(t.toFixed(6))};return 0===s?(t=0,n=0,r=1):1!==s&&(t/=s,n/=s,r/=s),1===t&&0===n&&0===r?(m.m22=m.m33=1-2*p,m.m23=m.m32=2*h,m.m32*=-1):0===t&&1===n&&0===r?(m.m11=m.m33=1-2*p,m.m13=m.m31=2*h,m.m13*=-1):0===t&&0===n&&1===r?(m.m11=m.m22=1-2*p,m.m12=m.m21=2*h,m.m21*=-1):(u=t*t,o=n*n,i=r*r,m.m11=v(1-2*(o+i)*p),m.m12=v(2*(t*n*p+r*h)),m.m13=v(2*(t*r*p-n*h)),m.m21=v(2*(t*n*p-r*h)),m.m22=v(1-2*(u+i)*p),m.m23=v(2*(n*r*p+t*h)),m.m31=v(2*(t*r*p+n*h)),m.m32=v(2*(n*r*p-t*h)),m.m33=v(1-2*(u+o)*p)),this.multiply(m)},e.prototype.scale=function(t,n,r){var a=new e;return("number"!=typeof t||isNaN(t))&&(t=1),("number"!=typeof n||isNaN(n))&&(n=t),("number"!=typeof r||isNaN(r))&&(r=1),a.m11=t,a.m22=n,a.m33=r,this.multiply(a)},e.prototype.skewX=function(t){var n=f.angles.deg2rad(t),r=new e;return r.c=Math.tan(n),this.multiply(r)},e.prototype.skewY=function(t){var n=f.angles.deg2rad(t),r=new e;return r.b=Math.tan(n),this.multiply(r)},e.prototype.translate=function(t,n,r){var a=new e;return("number"!=typeof t||isNaN(t))&&(t=0),("number"!=typeof n||isNaN(n))&&(n=0),("number"!=typeof r||isNaN(r))&&(r=0),a.m41=t,a.m42=n,a.m43=r,this.multiply(a)},e.prototype.setMatrixValue=function(t){var n=c(t.trim()),r=f.transp.statementToObject(n);if(r){var e=r.key===f.transp.matrixFn3d,o=e?u:a,i=r.value,m=i.length;e&&16!==m||!e&&6!==m||i.forEach(function(t,n){var r=o(n);this[r]=t.value},this)}},e.prototype.toString=function(){var t,n;return f.matrix.isAffine(this)?(n=f.transp.matrixFn2d,t=l):(n=f.transp.matrixFn3d,t=p),n+"("+t.map(function(t){return this[t].toFixed(6)},this).join(", ")+")"};var h={matrix:function(t,n){var r=new e(n.unparsed);return t.multiply(r)},matrix3d:function(t,n){var r=new e(n.unparsed);return t.multiply(r)},perspective:function(t,n){var r=new e;return r.m34-=1/n.value[0].value,t.multiply(r)},rotate:function(t,n){return t.rotate.apply(t,n.value.map(o))},rotate3d:function(t,n){return t.rotateAxisAngle.apply(t,n.value.map(o))},rotateX:function(t,n){return t.rotate.apply(t,[n.value[0].value,0,0])},rotateY:function(t,n){return t.rotate.apply(t,[0,n.value[0].value,0])},rotateZ:function(t,n){return t.rotate.apply(t,[0,0,n.value[0].value])},scale:function(t,n){return t.scale.apply(t,n.value.map(o))},scale3d:function(t,n){return t.scale.apply(t,n.value.map(o))},scaleX:function(t,n){return t.scale.apply(t,n.value.map(o))},scaleY:function(t,n){return t.scale.apply(t,[0,n.value[0].value,0])},scaleZ:function(t,n){return t.scale.apply(t,[0,0,n.value[0].value])},skew:function(t,n){var r=new e("skewX("+n.value[0].unparsed+")"),a=new e("skewY("+(n.value[1]&&n.value[1].unparsed||0)+")"),u="matrix(1.00000, "+a.b+", "+r.c+", 1.000000, 0.000000, 0.000000)",o=new e(u);return t.multiply(o)},skewX:function(t,n){return t.skewX.apply(t,[n.value[0].value])},skewY:function(t,n){return t.skewY.apply(t,[n.value[0].value])},translate:function(t,n){return t.translate.apply(t,n.value.map(o))},translate3d:function(t,n){return t.translate.apply(t,n.value.map(o))},translateX:function(t,n){return t.translate.apply(t,[n.value[0].value,0,0])},translateY:function(t,n){return t.translate.apply(t,[0,n.value[0].value,0])},translateZ:function(t,n){return t.translate.apply(t,[0,0,n.value[0].value])}};t.exports=e},function(t,n){function r(t){return t*Math.PI/180}function e(t){return t*(180/Math.PI)}function a(t){return t/(400/360)}t.exports={deg2rad:r,rad2deg:e,grad2deg:a}},function(t,n,r){function e(t,n,r,e){return t*e-n*r}function a(t,n,r,a,u,o,i,m,s){return t*e(u,o,m,s)-a*e(n,r,m,s)+i*e(n,r,u,o)}function u(t){var n=t,r=n.m11,e=n.m21,u=n.m31,o=n.m41,i=n.m12,m=n.m22,s=n.m32,c=n.m42,f=n.m13,l=n.m23,p=n.m33,h=n.m43,v=n.m14,M=n.m24,y=n.m34,d=n.m44;return r*a(m,l,M,s,p,y,c,h,d)-e*a(i,f,v,s,p,y,c,h,d)+u*a(i,f,v,m,l,M,c,h,d)-o*a(i,f,v,m,l,M,s,p,y)}function o(t){return 0===t.m13&&0===t.m14&&0===t.m23&&0===t.m24&&0===t.m31&&0===t.m32&&1===t.m33&&0===t.m34&&0===t.m43&&1===t.m44}function i(t){var n=t;return 1===n.m11&&0===n.m12&&0===n.m13&&0===n.m14&&0===n.m21&&1===n.m22&&0===n.m23&&0===n.m24&&0===n.m31&&0===n.m31&&1===n.m33&&0===n.m34&&1===n.m44}function m(t){var n=t,r=new t.constructor,e=n.m11,u=n.m12,o=n.m13,i=n.m14,m=n.m21,s=n.m22,c=n.m23,f=n.m24,l=n.m31,p=n.m32,h=n.m33,v=n.m34,M=n.m41,y=n.m42,d=n.m43,x=n.m44;return r.m11=a(s,p,y,c,h,d,f,v,x),r.m21=-a(m,l,M,c,h,d,f,v,x),r.m31=a(m,l,M,s,p,y,f,v,x),r.m41=-a(m,l,M,s,p,y,c,h,d),r.m12=-a(u,p,y,o,h,d,i,v,x),r.m22=a(e,l,M,o,h,d,i,v,x),r.m32=-a(e,l,M,u,p,y,i,v,x),r.m42=a(e,l,M,u,p,y,o,h,d),r.m13=a(u,s,y,o,c,d,i,f,x),r.m23=-a(e,m,M,o,c,d,i,f,x),r.m33=a(e,m,M,u,s,y,i,f,x),r.m43=-a(e,m,M,u,s,y,o,c,d),r.m14=-a(u,s,p,o,c,h,i,f,v),r.m24=a(e,m,l,o,c,h,i,f,v),r.m34=-a(e,m,l,u,s,p,i,f,v),r.m44=a(e,m,l,u,s,p,o,c,h),r}function s(t){var n;if(i(t))return n=new t.constructor,0===t.m41&&0===t.m42&&0===t.m43||(n.m41=-t.m41,n.m42=-t.m42,n.m43=-t.m43),n;var r=m(t),e=u(t);if(Math.abs(e)<1e-8)return null;for(var a=1;a<5;a++)for(var o=1;o<5;o++)r["m"+a+o]/=e;return r}function c(t,n){if(!n)return null;var r=n,e=t,a=new t.constructor;return a.m11=r.m11*e.m11+r.m12*e.m21+r.m13*e.m31+r.m14*e.m41,a.m12=r.m11*e.m12+r.m12*e.m22+r.m13*e.m32+r.m14*e.m42,a.m13=r.m11*e.m13+r.m12*e.m23+r.m13*e.m33+r.m14*e.m43,a.m14=r.m11*e.m14+r.m12*e.m24+r.m13*e.m34+r.m14*e.m44,a.m21=r.m21*e.m11+r.m22*e.m21+r.m23*e.m31+r.m24*e.m41,a.m22=r.m21*e.m12+r.m22*e.m22+r.m23*e.m32+r.m24*e.m42,a.m23=r.m21*e.m13+r.m22*e.m23+r.m23*e.m33+r.m24*e.m43,a.m24=r.m21*e.m14+r.m22*e.m24+r.m23*e.m34+r.m24*e.m44,a.m31=r.m31*e.m11+r.m32*e.m21+r.m33*e.m31+r.m34*e.m41,a.m32=r.m31*e.m12+r.m32*e.m22+r.m33*e.m32+r.m34*e.m42,a.m33=r.m31*e.m13+r.m32*e.m23+r.m33*e.m33+r.m34*e.m43,a.m34=r.m31*e.m14+r.m32*e.m24+r.m33*e.m34+r.m34*e.m44,a.m41=r.m41*e.m11+r.m42*e.m21+r.m43*e.m31+r.m44*e.m41,a.m42=r.m41*e.m12+r.m42*e.m22+r.m43*e.m32+r.m44*e.m42,a.m43=r.m41*e.m13+r.m42*e.m23+r.m43*e.m33+r.m44*e.m43,a.m44=r.m41*e.m14+r.m42*e.m24+r.m43*e.m34+r.m44*e.m44,a}function f(t){for(var n,r=new t.constructor,e=4,a=4,u=a;u;){for(n=e;n;)r["m"+u+n]=t["m"+n+u],n--;u--}return r}function l(t){var n,r,e,a,o,i,m,c,l,h,v,M,y;if(0==t.m33)return!1;for(c=1;c<=4;c++)for(j=1;j<4;j++)t["m"+c+j]/=t.m44;if(n=t,n.m14=0,n.m24=0,n.m34=0,n.m44=1,0==u(n))return!1;for(0!=t.m14||0!=t.m24||0!=t.m34?(r=new p(t.m14,t.m24,t.m34,t.m44),e=s(n),a=f(e),o=r.multiplyByMatrix(a)):o=new p(0,0,0,1),i=new p(t.m41,t.m42,t.m43),m=[new p,new p,new p],c=1,l=m.length;c<l;c++)m[c-1].x=t["m"+c+"1"],m[c-1].y=t["m"+c+"2"],m[c-1].z=t["m"+c+"3"];if(h=new p,v=new p,h.x=m[0].length(),m[0]=m[0].normalize(),v.x=m[0].dot(m[1]),m[1]=m[1].combine(m[0],1,-v.x),h.y=m[1].length(),m[1]=m[1].normalize(),v.x/=h.y,v.y=m[0].dot(m[2]),m[2]=m[2].combine(m[0],1,-v.y),v.z=m[1].dot(m[2]),m[2]=m[2].combine(m[1],1,-v.z),h.z=m[2].length(),m[2]=m[2].normalize(),v.y=v.y/h.z||0,v.z=v.z/h.z||0,M=m[1].cross(m[2]),m[0].dot(M)<0)for(c=0;c<3;c++)h.x*=-1,m[c].x*=-1,m[c].y*=-1,m[c].z*=-1;return y=new p,y.x=.5*Math.sqrt(Math.max(1+m[0].x-m[1].y-m[2].z,0)),y.y=.5*Math.sqrt(Math.max(1-m[0].x+m[1].y-m[2].z,0)),y.z=.5*Math.sqrt(Math.max(1-m[0].x-m[1].y+m[2].z,0)),y.w=.5*Math.sqrt(Math.max(1+m[0].x+m[1].y+m[2].z,0)),y.y=Math.asin(-m[0].z),0!=Math.cos(y.y)?(y.x=Math.atan2(m[1].z,m[2].z),y.z=Math.atan2(m[0].y,m[0].x)):(y.x=Math.atan2(-m[2].x,m[1].y),y.z=0),{perspective:o,translate:i,skew:v,scale:h,rotate:y}}t.exports={determinant2x2:e,determinant3x3:a,determinant4x4:u,isAffine:o,isIdentityOrTranslation:i,adjoint:m,inverse:s,multiply:c,decompose:l};var p=r(13)},function(t,n,r){function e(t,n,r,e){this.x=t,this.y=n,this.z=r,this.w=e,this.checkValues()}var a=r(14);t.exports=e,e.prototype.checkValues=function(){this.x=this.x||0,this.y=this.y||0,this.z=this.z||0,this.w=this.w||0},e.prototype.length=function(){return this.checkValues(),a.length(this)},e.prototype.normalize=function(){return a.normalize(this)},e.prototype.dot=function(t){return a.dot(this,t)},e.prototype.cross=function(t){return a.cross(this,t)},e.prototype.combine=function(t,n,r){return a.combine(this,t,n,r)},e.prototype.multiplyByMatrix=function(t){return a.multiplyByMatrix(this,t)}},function(t,n){function r(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}function e(t){var n=r(t),e=new t.constructor(t.x/n,t.y/n,t.z/n);return e}function a(t,n){return t.x*n.x+t.y*n.y+t.z*n.z+t.w*n.w}function u(t,n){return new t.constructor(t.y*n.z-t.z*n.y,t.z*n.x-t.x*n.z,t.x*n.y-t.y*n.x)}function o(t,n,r,e){return new t.constructor(r*t.x+e*n.x,r*t.y+e*n.y,r*t.z+e*n.z)}function i(t,n){return new t.constructor(n.m11*t.x+n.m12*t.y+n.m13*t.z,n.m21*t.x+n.m22*t.y+n.m23*t.z,n.m31*t.x+n.m32*t.y+n.m33*t.z)}t.exports={length:r,normalize:e,dot:a,cross:u,combine:o,multiplyByMatrix:i}},function(t,n){function r(t){var n=/([\-\+]?[0-9]+[\.0-9]*)(deg|rad|grad|px|%)*/,r=t.match(n)||[];return{value:parseFloat(r[1]),units:r[2],unparsed:t}}function e(t,n){var e=/(\w+)\(([^\)]+)\)/i,a=t.toString().match(e).slice(1),u=a[0],o=a[1].split(/, ?/),i=!n&&o.map(r);return{key:u,value:i||o,unparsed:t}}function a(t){var n=/(\w+)\([^\)]+\)/gi,r=t.match(n)||[];return r}t.exports={matrixFn2d:"matrix",matrixFn3d:"matrix3d",valueToObject:r,statementToObject:e,stringToStatements:a}}])});